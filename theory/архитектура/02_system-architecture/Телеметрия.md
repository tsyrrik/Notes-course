### Коротко

**Телеметрия** — это сбор, передача и хранение данных о работе системы.  
Проще говоря, это **сигналы, которые приложение шлёт наружу**, чтобы кто-то мог измерить его состояние.

Телеметрия — это часть слова “observability”.  
Если наблюдаемость отвечает на вопрос _«можно ли понять, что происходит?»_,  
то **телеметрия — это то, _что именно_ мы собираем, чтобы это понять.**

---

### Пример на пальцах

У тебя есть сервер.  
Он работает, логирует, считает запросы и пишет трейсы.  
Всё это и есть телеметрия:

|Тип|Пример|Что это|
|---|---|---|
|**Логи**|`[2025-10-31 12:00] user_id=42 login ok`|События в текстовой форме|
|**Метрики**|`app_requests_total{status="200"} 431`|Численные измерения|
|**Трейсы**|traceID=abc123 → запрос → база → Redis|Контекст выполнения запроса|
|**Профайлы**|CPU, память, IO, allocations|Детализация производительности|

---

### Ключевая идея

Телеметрия — это **сырой материал для наблюдаемости**.  
Без неё ни дашборды, ни алерты, ни “опен телеметри” просто не работают.

> Observability = Telemetry data + Инструменты + Интерпретация

---

### Что входит в телеметрию приложения

1. **Системная телеметрия**
    
    - CPU, память, диск, сеть, uptime
        
    - собирается агентами (node_exporter, telegraf)
        
2. **Приложенческая телеметрия**
    
    - RPS, latency, error rate
        
    - custom метрики, события, трейсы
        
3. **Бизнес-телеметрия**
    
    - “новые регистрации”, “покупки”, “заказы”
        
    - для product dashboards и SLA
        

---

### Как она передаётся

|Подход|Как работает|Пример|
|---|---|---|
|**Pull**|мониторинг тянет `/metrics`|Prometheus|
|**Push**|приложение шлёт данные в коллектор|StatsD, OpenTelemetry|
|**Agent-based**|агент читает логи/метрики и пушит|Telegraf, FluentBit, Vector|
|**Client SDK**|библиотека шлёт трейсы/метрики|OpenTelemetry SDK|

---

### Телеметрия ≠ логирование

||Логи|Телеметрия|
|---|---|---|
|Формат|Текст, JSON|Структурированные данные|
|Цель|Диагностика событий|Измерение состояния|
|Обработка|Читаешь глазами|Считается и агрегируется|
|Пример|“Ошибка при логине”|“Ошибка логина случается 3 раза в минуту”|

---

### OpenTelemetry (OTel)

**OpenTelemetry** — это стандарт (и SDK), который объединяет всё:  
**трейсы, метрики, логи** — в одну схему, формат и протокол.

Зачем:

- единый trace ID для всех сигналов;
    
- экспорт в Prometheus, Jaeger, Grafana, Datadog и др.;
    
- минимизация зоопарка библиотек.
    

Пример трейса с метрикой:

```php
$tracer->spanBuilder('db_query')->startSpan();
// ...
$meter->createCounter('db_queries_total')->add(1, ['table' => 'users']);
```

---

### Пример практического потока телеметрии

```
[PHP приложение]
   ↓
(трейсы, логи, метрики)
   ↓
[OpenTelemetry Collector]
   ↓
┌──────────────┬───────────────┬─────────────┐
│ Prometheus   │ Loki / ELK    │ Jaeger      │
│ (метрики)    │ (логи)        │ (трейсы)    │
└──────────────┴───────────────┴─────────────┘
   ↓
[Grafana] — визуализация и алерты
```

---

### Зачем тебе как разработчику телеметрия

- **Понимать, что реально происходит**, а не гадать по логам.
    
- **Замерять эффект изменений** (релиз, оптимизация).
    
- **Снижать MTTR** (время до восстановления после сбоя).
    
- **Делать алерты не “по ощущениям”, а по данным**.
    

---

### Итого

**Телеметрия — это нервная система приложения.**  
Она собирает сигналы, которые потом превращаются в наблюдаемость, метрики, дашборды и алерты.

Если observability — это “видеть”,  
то телеметрия — это “глаза и нервы”, которые передают, что именно видеть.