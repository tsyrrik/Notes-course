**–§–∞–π–±–µ—Ä—ã (Fibers)** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏,  
–≤–≤–µ–¥—ë–Ω–Ω—ã–π –≤ PHP 8.1.  
–û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç **–ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ **–≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å** –µ—ë –ø–æ–∑–∂–µ,  
–Ω–µ –±–ª–æ–∫–∏—Ä—É—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫.

–≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤**, –≤—Ä–æ–¥–µ ReactPHP, Amphp –∏ Laravel Octane.

---

### 1. –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞—é—Ç —Ñ–∞–π–±–µ—Ä—ã

–û–±—ã—á–Ω—ã–π PHP-–∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑.  
–ï—Å–ª–∏ –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sleep()` –∏–ª–∏ –∑–∞–ø—Ä–æ—Å –≤ –ë–î),  
–≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äú–∂–¥—ë—Ç‚Äù.

–§–∞–π–±–µ—Ä—ã –¥–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å:

- –≤—Ä–µ–º–µ–Ω–Ω–æ **–ø–µ—Ä–µ–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –≤—ã–∑—ã–≤–∞—é—â–µ–º—É –∫–æ–¥—É;
    
- –ø–æ—Ç–æ–º **–≤–µ—Ä–Ω—É—Ç—å—Å—è** —Ç—É–¥–∞, –≥–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å;
    
- –ø—Ä–∏ —ç—Ç–æ–º –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –∏–ª–∏ async/await —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞.
    

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ _–∫–∞–∫ –±—É–¥—Ç–æ –æ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π_.

---

### 2. –ü—Ä–æ—Å—Ç–∞—è –∞–Ω–∞–ª–æ–≥–∏—è

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç —Å–∫–∞–∑–∞—Ç—å:

> ‚Äú–ü–æ—Å—Ç–æ–π, —è –≤–µ—Ä–Ω—É—Å—å –ø–æ–∑–∂–µ, –∞ –ø–æ–∫–∞ –¥–µ–ª–∞–π —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ.‚Äù

–ò –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ ‚Äî –º–æ–∂–µ—Ç.

---

### 3. –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–∏–º–µ—Ä

```php
$fiber = new Fiber(function (): void {
    echo "Step 1\n";
    $value = Fiber::suspend("Paused");
    echo "Step 2, got: $value\n";
});

echo $fiber->start();   // Step 1 + –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "Paused"
$fiber->resume("Resumed value"); // Step 2, got: Resumed value
```

üß† –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. `start()` –∑–∞–ø—É—Å–∫–∞–µ—Ç Fiber –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥ –¥–æ `Fiber::suspend()`.
    
2. `suspend()` ‚Äú–∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç‚Äù –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã–∑—ã–≤–∞—é—â–µ–º—É –∫–æ–¥—É.
    
3. `resume()` ‚Äú—Ä–∞–∑–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç‚Äù Fiber, –ø–µ—Ä–µ–¥–∞–≤–∞—è –≤ –Ω–µ–≥–æ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
    

---

### 4. –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ –ø–∞–º—è—Ç–∏

- –ö–∞–∂–¥—ã–π Fiber –∏–º–µ–µ—Ç **—Å–≤–æ–π —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤**.
    
- –ü—Ä–∏ `suspend()` —Å—Ç–µ–∫ ‚Äú—Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è‚Äù, –ø—Ä–∏ `resume()` ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.
    
- –≠—Ç–æ –¥–µ—à—ë–≤–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –ø–æ—Ç–æ–∫–∞–º ‚Äî –Ω–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –û–°.
    

---

### 5. –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ–∞–π–±–µ—Ä—ã

‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏**  
(ReactPHP, Amphp, Laravel Octane, Swoole) –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–∞–π–±–µ—Ä—ã  
–¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: I/O, –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î, HTTP.

‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è**  
–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á, ‚Äú–ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è‚Äù –∏ ‚Äú–≤–æ–∑–æ–±–Ω–æ–≤–ª—è—è‚Äù –∏—Ö –≤—Ä—É—á–Ω—É—é.

‚úÖ **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ (Schedulers)**  
–§–∞–π–±–µ—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ event loop-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

### 6. –ü—Ä–∏–º–µ—Ä —Å ‚Äú–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å—é‚Äù

```php
function task(string $name): Fiber {
    return new Fiber(function() use ($name) {
        for ($i = 1; $i <= 3; $i++) {
            echo "$name: step $i\n";
            Fiber::suspend();
        }
    });
}

$tasks = [task('A'), task('B')];

while ($tasks) {
    foreach ($tasks as $i => $fiber) {
        if (!$fiber->isStarted()) $fiber->start();
        elseif (!$fiber->isTerminated()) $fiber->resume();
        else unset($tasks[$i]);
    }
}
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

```
A: step 1
B: step 1
A: step 2
B: step 2
A: step 3
B: step 3
```

> –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ‚Äú–ø—Å–µ–≤–¥–æ–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ‚Äù, —Ö–æ—Ç—è –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫.

---

### 7. –û—Ç–ª–∏—á–∏–µ –æ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ (`yield`)

||**Fiber**|**Generator (`yield`)**|
|---|---|---|
|–£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é|‚úÖ `start()`, `suspend()`, `resume()`|‚ùå —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏|
|–û—Ç–¥–µ–ª—å–Ω—ã–π —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤|‚úÖ|‚ùå|
|–ú–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∏–∑ –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å—Ç–µ–∫–∞|‚úÖ|‚ùå (—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å `yield`)|
|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è|–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏, event loop|–ü—Ä–æ—Å—Ç–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏|

> –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä ‚Äî —ç—Ç–æ —á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.  
> –§–∞–π–±–µ—Ä ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º.

---

### 8. –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

- –ù–µ–ª—å–∑—è –≤—ã–∑—ã–≤–∞—Ç—å `resume()` –∏–∑–Ω—É—Ç—Ä–∏ —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞, –≥–¥–µ –±—ã–ª `suspend()` ‚Äî –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç deadlock.
    
- –ù–µ–ª—å–∑—è –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å —É–∂–µ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π Fiber.
    
- –ù–µ–ª—å–∑—è –≤—ã–∑—ã–≤–∞—Ç—å `suspend()` –≤–Ω–µ Fiber (–≤ –æ–±—ã—á–Ω–æ–º –∫–æ–¥–µ).
    

---

### 9. –ü—Ä–∞–∫—Ç–∏–∫–∞

–í —á–∏—Å—Ç–æ–º PHP —Ñ–∞–π–±–µ—Ä—ã —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é.  
–û–±—ã—á–Ω–æ –æ–Ω–∏ —Å–∫—Ä—ã—Ç—ã –∑–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏:

- **Amphp** ‚Äî —Å—Ç—Ä–æ–∏—Ç event loop –Ω–∞ —Ñ–∞–π–±–µ—Ä–∞—Ö.
    
- **Laravel Octane** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏.
    
- **Symfony Messenger (async transports)** ‚Äî —Ç–æ–∂–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Fiber-based drivers.
    

---

### üí° –í –æ–¥–Ω–æ–π —Ñ—Ä–∞–∑–µ

> **–§–∞–π–±–µ—Ä—ã** ‚Äî —ç—Ç–æ ‚Äú–º–∏–Ω–∏-–ø–æ—Ç–æ–∫–∏‚Äù –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ PHP,  
> –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏,  
> —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Ç–∞–µ–º—ã–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º.

[[–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã (Generators) –≤ PHP]]
