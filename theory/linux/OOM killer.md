OOM killer — это такая милая часть ядра Linux, которая решает, **кого из ваших процессов сегодня убить, чтобы не умерла вся система**.  
OOM = _Out Of Memory_. Когда памяти нет вообще.

---

### Как это работает

1. У системы заканчивается физическая и swap-память.
    
2. Ядро паникует: «мне некуда писать, процессам нечего жрать».
    
3. Запускается **OOM killer** — специальный механизм, который выбирает _наименее ценный_ процесс и выносит его `SIGKILL`’ом.
    

---

### По какому принципу он выбирает жертву

У каждого процесса есть **oom_score**, который показывает, насколько он “подозрителен”:

- чем больше он жрёт RAM — тем выше балл;
    
- чем меньше у него прав (uid ≠ 0) — тем выше шанс быть убитым;
    
- системные процессы (init, sshd, journald) получают бонус к выживанию;
    
- пользовательские демоны вроде php-fpm, node, mysqld часто становятся жертвами.
    

Можно посмотреть:

```bash
cat /proc/<pid>/oom_score
```

---

### Как это выглядит в логах

В `dmesg` или `/var/log/kern.log` появится примерно такое:

```
Out of memory: Kill process 1789 (php-fpm) score 962 or sacrifice child
Killed process 1789 (php-fpm), total-vm:2560000kB, anon-rss:2048000kB
```

Поздравляю, ваш пул php-fpm только что отправился к праотцам.

---

### Как не попасть под OOM

1. **Контролируй память **
    
    Узнать средний расход можно банально: запусти нагрузку и глянь `ps -o rss`.
    
2. **Используй swap** — пусть даже маленький. Лучше медленно, чем мертво.
    
3. **Ограничивай контейнеры** (в docker-compose, k8s) и ставь `memory_limit` в php.ini, чтобы процессы умирали красиво, а не через ядро.
    
4. **Следи за логами OOM killer’а** — это не "редкий баг", а ранний признак, что ты зажал ресурсы.
    


С ООМ можно встретися если запускаешь консольную команду приложения и внезапно видишь надпись `Killed`
Так же ООМ может убивать пулы php-fpm'а