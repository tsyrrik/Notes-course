**–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± **—Ä–∞–∑–¥–µ–ª–∏—Ç—å –æ–¥–Ω—É –ª–æ–≥–∏—á–µ—Å–∫—É—é —Ç–∞–±–ª–∏—Ü—É –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö**,  
—á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

> –í–Ω–µ—à–Ω–µ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π,  
> –Ω–æ PostgreSQL –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö ‚Äú–∫—É—Å–æ—á–∫–∞—Ö‚Äù ‚Äî _partitions_.

---

### 1. –ó–∞—á–µ–º –Ω—É–∂–Ω–æ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

|–ü—Ä–æ–±–ª–µ–º–∞|–ß—Ç–æ —Ä–µ—à–∞–µ—Ç|
|---|---|
|–¢–∞–±–ª–∏—Ü–∞ –≤—ã—Ä–æ—Å–ª–∞ –Ω–∞ —Å–æ—Ç–Ω–∏ –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Å—Ç—Ä–æ–∫|–ë—ã—Å—Ç—Ä–µ–µ –≤—ã–±–æ—Ä–∫–∏ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º|
|–î–æ–ª–≥–∏–µ DELETE‚Äô—ã —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö|–ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ DROP-–Ω—É—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏—é|
|–ò–Ω–¥–µ–∫—Å—ã —Å—Ç–∞–ª–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º–∏|–ò–Ω–¥–µ–∫—Å —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏|
|–ê–Ω–∞–ª–∏–∑ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø–æ ‚Äú–Ω–æ–≤—ã–º‚Äù –¥–∞–Ω–Ω—ã–º|–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–∞—è —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö|

> –û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –≤ —Å–∏—Å—Ç–µ–º–∞—Ö –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –ª–æ–≥–∞—Ö, –º–µ—Ç—Ä–∏–∫–∞—Ö, –∫–ª–∏–∫–∞—Ö –∏ —Å–æ–±—ã—Ç–∏—è—Ö.

---

### 2. –¢–∏–ø—ã –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

|–¢–∏–ø|–ö–∞–∫ –¥–µ–ª–∏—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞|–ü—Ä–∏–º–µ—Ä|
|---|---|---|
|**Range**|–ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –∑–Ω–∞—á–µ–Ω–∏–π|–¥–∞—Ç—ã (`2024-01`, `2024-02`, ‚Ä¶)|
|**List**|–ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º|—Ä–µ–≥–∏–æ–Ω—ã (`RU`, `US`, `EU`)|
|**Hash**|–ø–æ —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏|—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ shard-–∫–ª—é—á—É|
|**Composite**|–∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ç–∏–ø–æ–≤|–Ω–∞–ø—Ä–∏–º–µ—Ä `RANGE + HASH`|

---

### 3. –ü—Ä–∏–º–µ—Ä –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –¥–∞—Ç–µ

#### 1. –°–æ–∑–¥–∞—ë–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é —Ç–∞–±–ª–∏—Ü—É

```sql
CREATE TABLE events (
    id BIGSERIAL PRIMARY KEY,
    created_at DATE NOT NULL,
    payload JSONB
) PARTITION BY RANGE (created_at);
```

#### 2. –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä—Ç–∏—Ü–∏–∏

```sql
CREATE TABLE events_2024_01 PARTITION OF events
    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');

CREATE TABLE events_2024_02 PARTITION OF events
    FOR VALUES FROM ('2024-02-01') TO ('2024-03-01');
```

#### 3. –í—Å—Ç–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ

```sql
INSERT INTO events (created_at, payload)
VALUES ('2024-01-15', '{"user":1}');
```

> PostgreSQL —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç, –≤ –∫–∞–∫—É—é –ø–∞—Ä—Ç–∏—Ü–∏—é –ø–æ–ª–æ–∂–∏—Ç—å —Å—Ç—Ä–æ–∫—É.

---

### 4. –ö–∞–∫ —ç—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

–ü—Ä–∏ –≤—ã–±–æ—Ä–∫–µ:

```sql
SELECT COUNT(*) FROM events WHERE created_at >= '2024-02-01';
```

PostgreSQL **–¥–µ–ª–∞–µ—Ç "partition pruning"** ‚Äî  
–æ–Ω –æ–±—Ö–æ–¥–∏—Ç **—Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏**, –∞ –Ω–µ –≤—Å—é —Ç–∞–±–ª–∏—Ü—É.

```
Seq Scan on events_2024_02 ...
```

> –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –¥—Ä—É–≥–∏–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –ø—Ä–∏–∑–Ω–∞–∫–∞–º.

---

### 5. DROP –≤–º–µ—Å—Ç–æ DELETE

–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫:

```sql
DROP TABLE events_2023_12;
```

‚Üí –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ, –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ VACUUM.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `DELETE FROM events WHERE created_at < ...`,  
–∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—Ç—Ä—ë—Ç –º–∏–ª–ª–∏–æ–Ω—ã —Å—Ç—Ä–æ–∫ –∏ –Ω–∞–≥—Ä—É–∑–∏—Ç –¥–∏—Å–∫.

---

### 6. –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è **–≤ –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ**.  
    –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –ø–æ `created_at`, –¥–æ–±–∞–≤—å –∏–Ω–¥–µ–∫—Å –≤ –∫–∞–∂–¥—É—é –ø–∞—Ä—Ç–∏—Ü–∏—é:
    
    ```sql
    CREATE INDEX ON events_2024_01 (created_at);
    ```
    
- –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å **–ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä—É—é—â–∏–π —Å—Ç–æ–ª–±–µ—Ü**,  
    –∏–Ω–∞—á–µ PostgreSQL –Ω–µ —Å–º–æ–∂–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ.
    

---

### 7. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–π

–î–ª—è —Å–∏—Å—Ç–µ–º —Å –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–º –ø–æ—Ç–æ–∫–æ–º –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–æ–≤)  
–º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–π —á–µ—Ä–µ–∑ cron –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

- **pg_partman** ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä—Ç–∏—Ü–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏.
    
- –ò–ª–∏ —Å–≤–æ–π SQL-—Å–∫—Ä–∏–ø—Ç:
    
    ```sql
    DO $$
    BEGIN
      IF NOT EXISTS (
        SELECT FROM pg_tables WHERE tablename = 'events_2024_03'
      ) THEN
        EXECUTE 'CREATE TABLE events_2024_03 PARTITION OF events
                 FOR VALUES FROM (''2024-03-01'') TO (''2024-04-01'');';
      END IF;
    END $$;
    ```
    

---

### 8. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏:
    
    ```sql
    SELECT relname, reltuples
    FROM pg_class
    WHERE relname LIKE 'events_%';
    ```
    
- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ —á–∏—Ç–∞—é—Ç—Å—è:
    
    ```sql
    EXPLAIN SELECT * FROM events WHERE created_at >= '2024-02-01';
    ```
    
    ‚Üí –ø–æ–∫–∞–∂–µ—Ç ‚ÄúPruned 4 partitions‚Äù.
    

---

### 9. –ö–æ–≥–¥–∞ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

‚ùå –¢–∞–±–ª–∏—Ü–∞ –º–∞–ª–µ–Ω—å–∫–∞—è (< 10 –º–ª–Ω —Å—Ç—Ä–æ–∫) ‚Äî –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –±–æ–ª—å—à–µ –ø–æ–ª—å–∑—ã.  
‚ùå –ù–µ—Ç —á—ë—Ç–∫–æ–π –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è.  
‚ùå –ß–∞—Å—Ç—ã–µ JOIN-—ã –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º ‚Äî –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É.  
‚ùå –ù–µ–∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ ‚Äî —Å—ä–µ–¥—è—Ç –ø–∞–º—è—Ç—å.

---

### 10. –ê–Ω–∞–ª–æ–≥–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –æ–±—â–∏–π –ø—Ä–∏–Ω—Ü–∏–ø:

|–°–∏—Å—Ç–µ–º–∞|–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è|
|---|---|
|**PostgreSQL**|Partitioning|
|**ClickHouse**|PARTITION BY + ORDER BY|
|**MySQL**|RANGE / HASH PARTITION|
|**Kafka**|Topic partitions|
|**Elasticsearch**|Index per day (rolling indices)|
|**Redis Cluster**|Hash slots|
|**Hadoop / S3**|Data lake partitions (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ `year/month/day`)|

> –í–µ–∑–¥–µ —Ü–µ–ª—å –æ–¥–Ω–∞: **–Ω–µ —Ç—Ä–æ–≥–∞—Ç—å –ª–∏—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ**.

---

### üí° –í –æ–¥–Ω–æ–π —Ñ—Ä–∞–∑–µ

> **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ ‚Äú—É–º–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ‚Äù —Ç–∞–±–ª–∏—Ü—ã,  
> –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø—Ä–æ—Å—ã —á–∏—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∫—É—Å–∫–∏,  
> –∞ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –≤—ã–±—Ä–æ—Å–∏—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

[[–®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (Sharding) –≤ PostgreSQL]]
[[–†–µ–ø–ª–∏–∫–∞—Ü–∏—è (replication) –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ PostgreSQL)]]
