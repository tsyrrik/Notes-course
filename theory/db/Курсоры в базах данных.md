**–ö—É—Ä—Å–æ—Ä (cursor)** ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç –≤ –°–£–ë–î, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç **—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –≤ –Ω–∞–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö**,  
–≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–º –∑–∞–ø—Ä–æ—Å–æ–º `SELECT`.  
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç **–ø–æ—à–∞–≥–æ–≤–æ –æ–±—Ö–æ–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç**, –Ω–µ –∑–∞–≥—Ä—É–∂–∞—è –≤—Å—ë —Å—Ä–∞–∑—É.

---

### 1. –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

–ö–æ–≥–¥–∞ —Ç—ã –¥–µ–ª–∞–µ—à—å –æ–±—ã—á–Ω—ã–π `SELECT`, –±–∞–∑–∞ —Å—Ç—Ä–æ–∏—Ç **–ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞**,  
—á–∏—Ç–∞–µ—Ç –≤—Å–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Å—Ç—Ä–æ–∫–∏, —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –≤ –ø–∞–º—è—Ç—å (–∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—É—Ñ–µ—Ä) –∏ –æ—Ç–¥–∞—ë—Ç –∫–ª–∏–µ–Ω—Ç—É **—Ü–µ–ª–∏–∫–æ–º**.

–ï—Å–ª–∏ –∂–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è **–∫—É—Ä—Å–æ—Ä**, –°–£–ë–î:

1. –í—ã–ø–æ–ª–Ω—è–µ—Ç `DECLARE cursor_name CURSOR FOR SELECT ...`;
    
2. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏—é –ø–æ –Ω–µ–º—É;
    
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É _handle_ (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫—É—Ä—Å–æ—Ä–∞);
    
4. –ü—Ä–∏ `FETCH NEXT` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –ø–æ—Ä—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö (–æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫);
    
5. –ü—Ä–∏ `CLOSE` ‚Äî —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã.
    

–í–∞–∂–Ω–æ:  
–∫—É—Ä—Å–æ—Ä –∂–∏–≤—ë—Ç **–≤–Ω—É—Ç—Ä–∏ —Å–µ–∞–Ω—Å–∞** (connection/session) –∏ —á–∞—Å—Ç–æ ‚Äî **–≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.  
–ï—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ ‚Äî –∫—É—Ä—Å–æ—Ä –∏—Å—á–µ–∑–∞–µ—Ç.

---

### 2. –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (PostgreSQL –∫–∞–∫ –ø—Ä–∏–º–µ—Ä)

Postgres —Å–æ–∑–¥–∞—ë—Ç **–ø–æ—Ä—Ç–∞–ª** (`PortalData` —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ C),  
–≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è:

- —Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞,
    
- —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω,
    
- —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–º –Ω–∞–±–æ—Ä–µ (offset),
    
- –±—É—Ñ–µ—Ä —Å —É–∂–µ —Å—á–∏—Ç–∞–Ω–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ (ring buffer).
    

–ö–æ–≥–¥–∞ —Ç—ã –≤—ã–∑—ã–≤–∞–µ—à—å `FETCH`, Postgres –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å ‚Äî  
–æ–Ω **–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞** —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –∏ —á–∏—Ç–∞–µ—Ç –¥–∞–ª—å—à–µ.

–ï—Å–ª–∏ –∫—É—Ä—Å–æ—Ä **scrollable**, Postgres –º–æ–∂–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –≤–ø–µ—Ä—ë–¥/–Ω–∞–∑–∞–¥ (`FETCH PRIOR`, `FETCH ABSOLUTE 10`).  
–î–ª—è —ç—Ç–æ–≥–æ –æ–Ω –∫–µ—à–∏—Ä—É–µ—Ç —É–∂–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏.

---

### 3. –¢–∏–ø—ã –∫—É—Ä—Å–æ—Ä–æ–≤

|–¢–∏–ø|–ß—Ç–æ –¥–µ–ª–∞–µ—Ç|
|---|---|
|**Forward-only cursor**|–ú–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–ø–µ—Ä—ë–¥ (`FETCH NEXT`)|
|**Scrollable cursor**|–ú–æ–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã (`NEXT`, `PRIOR`, `ABSOLUTE`, `RELATIVE`)|
|**Read-only / Updatable**|–¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å `UPDATE WHERE CURRENT OF`|
|**Implicit cursor**|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –°–£–ë–î –≤–Ω—É—Ç—Ä–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ü–∏–∫–ª–∞—Ö PL/pgSQL)|
|**Client-side cursor (fetch size)**|–ö–ª–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥—Ä–∞–π–≤–µ—Ä JDBC/PDO) —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ä—Ü–∏—è–º–∏ –¥–∞–Ω–Ω—ã—Ö —Å–∞–º|

---

### 4. –ö—É—Ä—Å–æ—Ä—ã –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫—É—Ä—Å–æ—Ä–æ–≤ **–∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.  
–ù–∞–ø—Ä–∏–º–µ—Ä, –≤ PostgreSQL –∫—É—Ä—Å–æ—Ä –∂–∏–≤—ë—Ç **–¥–æ –∫–æ–Ω—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—ã–ª –æ–±—ä—è–≤–ª–µ–Ω:

```sql
BEGIN;
DECLARE cur CURSOR FOR SELECT * FROM logs;
FETCH 10 FROM cur;
COMMIT;  -- –∫—É—Ä—Å–æ—Ä —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è
```

–ß—Ç–æ–±—ã –∫—É—Ä—Å–æ—Ä –ø–µ—Ä–µ–∂–∏–≤–∞–ª `COMMIT`, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `WITH HOLD`:

```sql
DECLARE cur CURSOR WITH HOLD FOR SELECT * FROM logs;
```

–¢–æ–≥–¥–∞ Postgres –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª),  
–∏ –∫—É—Ä—Å–æ—Ä –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –ø–æ—Å–ª–µ `COMMIT`.

–≠—Ç–æ —É–∂–µ –Ω–µ "–∂–∏–≤–æ–π" –ø–ª–∞–Ω, –∞ **—Å–Ω–∞–ø—à–æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**.

---

### 5. –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ –ø–∞–º—è—Ç–∏

–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º –±–∞–∑–∞ –¥–µ—Ä–∂–∏—Ç **—É–∫–∞–∑–∞—Ç–µ–ª—å (pointer)** –≤ —Å–ø–∏—Å–∫–µ –∫–æ—Ä—Ç–µ–∂–µ–π.  
–ö–æ–≥–¥–∞ —Ç—ã –≤—ã–∑—ã–≤–∞–µ—à—å `FETCH`, –æ–Ω–∞:

- —á–∏—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (page) –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ –∏–Ω–¥–µ–∫—Å–∞;
    
- –¥–µ—Å—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç –∑–∞–ø–∏—Å—å (tuple);
    
- –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É;
    
- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É.
    

–ï—Å–ª–∏ –∫—É—Ä—Å–æ—Ä –±–æ–ª—å—à–æ–π, Postgres –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** –Ω–∞ –¥–∏—Å–∫–µ  
(–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `ORDER BY` –∏ `LIMIT/OFFSET`), —á—Ç–æ–±—ã –Ω–µ –¥–µ—Ä–∂–∞—Ç—å –≤–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ RAM.

---

### 6. –ü—Ä–∏–º–µ—Ä ‚Äî PostgreSQL

```sql
BEGIN;

DECLARE user_cur CURSOR FOR
SELECT id, email FROM users WHERE is_active = true ORDER BY id;

FETCH FORWARD 3 FROM user_cur;  -- –ø–µ—Ä–≤—ã–µ 3
FETCH FORWARD 3 FROM user_cur;  -- —Å–ª–µ–¥—É—é—â–∏–µ 3
CLOSE user_cur;

COMMIT;
```

Postgres –≤–Ω—É—Ç—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç:  
"–Ø —É–∂–µ –≤–µ—Ä–Ω—É–ª 6 —Å—Ç—Ä–æ–∫, —Å–ª–µ–¥—É—é—â–∞—è –ø–æ–∑–∏—Ü–∏—è = offset 6".  
–ù–∞ `FETCH` –æ–Ω –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ —Å —ç—Ç–æ–≥–æ –º–µ—Å—Ç–∞.

---

### 7. –ê–Ω–∞–ª–æ–≥–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```php
$stmt = $pdo->prepare('SELECT * FROM logs');
$stmt->execute();

while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    processRow($row);
}
```

–ù–∞ –¥–µ–ª–µ PDO –∏ –¥—Ä–∞–π–≤–µ—Ä Postgres **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç –∫—É—Ä—Å–æ—Ä** (–∏–ª–∏ –µ–≥–æ –∏–º–∏—Ç–∞—Ü–∏—é),  
—á—Ç–æ–±—ã –Ω–µ –¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏.  
–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **client-side cursor** –∏–ª–∏ **cursor-based streaming**.

---

### 8. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ –∞–Ω–∞–ª–æ–≥–∏

|–ü–æ–¥—Ö–æ–¥|–°–º—ã—Å–ª|
|---|---|
|**Pagination (OFFSET/LIMIT)**|–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –∫–∞–∂–¥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É|
|**Keyset pagination (WHERE id > last_id)**|–±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏|
|**Streaming API**|–∫–ª–∏–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –º–µ—Ä–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è|
|**Server cursors**|–∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å—Ç—Ä–æ—á–Ω–æ –≤–Ω—É—Ç—Ä–∏ –ë–î|

---

### 9. –ö–æ–≥–¥–∞ –∫—É—Ä—Å–æ—Ä—ã –æ–ø—Ä–∞–≤–¥–∞–Ω—ã

‚úÖ –Ω—É–∂–Ω—ã, –µ—Å–ª–∏:

- –¥–∞–Ω–Ω—ã–µ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –¥–ª—è –ø–∞–º—è—Ç–∏,
    
- –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≤—è–∑–∞–Ω–∞ –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ,
    
- —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–Ω—É—Ç—Ä–∏ –ë–î (–≤ —Ö—Ä–∞–Ω–∏–º—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ö).
    

üö´ –Ω–µ –Ω—É–∂–Ω—ã, –µ—Å–ª–∏:

- –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω `UPDATE/INSERT/DELETE ... WHERE ...`,
    
- –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏–ª–∏ –±–∞—Ç—á-–∑–∞–≥—Ä—É–∑–∫–∏,
    
- –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç —Å—Ç—Ä–∏–º–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—á–µ—Ä–µ–∑ `fetch()` –∏—Ç–µ—Ä–∞—Ç–æ—Ä).
    

---

### üí° –í –æ–¥–Ω–æ–π —Ñ—Ä–∞–∑–µ

> **–ö—É—Ä—Å–æ—Ä** ‚Äî —ç—Ç–æ ‚Äú—É–∫–∞–∑–∞—Ç–µ–ª—å‚Äù –≤ –ë–î, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
> –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–∞–∑–µ –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç—É –¥–≤–∏–≥–∞—Ç—å—Å—è –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∫–∞–∫ –ø–æ —Å–ø–∏—Å–∫—É,
> –Ω–µ –≤—ã—Ç–∞—Å–∫–∏–≤–∞—è –≤—Å—ë —Å—Ä–∞–∑—É –≤ –ø–∞–º—è—Ç—å.

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [[–í–∏–¥—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏]] ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ä–∞–∑–±–∏–≤–∞—Ç—å –≤—ã–¥–∞—á—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ —è–≤–Ω—ã—Ö –∫—É—Ä—Å–æ—Ä–æ–≤.
- [[–•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã (stored procedures)]] ‚Äî —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—É—Ä—Å–æ—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –ë–î.