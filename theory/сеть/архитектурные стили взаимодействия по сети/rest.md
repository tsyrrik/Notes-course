# REST и RESTful API

### Что это вообще

**REST** (_Representational State Transfer_) — это не фреймворк, не библиотека и не стандарт.  
Это **архитектурный стиль** взаимодействия между клиентом и сервером через HTTP.  
Его придумал Рой Филдинг в 2000-м, когда ещё считалось, что XML — это круто.

Идея простая:  
весь мир состоит из **ресурсов**, а HTTP уже умеет с ними работать через свои методы (`GET`, `POST`, `PUT`, `DELETE`).  
Так зачем городить RPC, SOAP и прочие уродства?

---

### Основные принципы REST

1. **Ресурсы, а не действия**  
    Всё — это сущности.
    
    ```
    GET /users        # получить список пользователей
    GET /users/10     # получить пользователя с id=10
    POST /users       # создать пользователя
    PUT /users/10     # обновить пользователя
    DELETE /users/10  # удалить пользователя
    ```
    
    Не надо `/getUser`, `/deleteUserById`, `/do_magic.php`.  
    Действия выражаются методом, не урлом.
    
2. **Stateless**  
    Сервер не хранит состояние клиента.  
    Каждый запрос самодостаточен — в нём всё, что нужно для обработки.  
    Никаких скрытых сессий и “я же авторизовался час назад”.
    
3. **Единообразие интерфейса (Uniform Interface)**  
    Клиент не должен знать внутренности сервера.  
    Всё общается через общие правила: URL, методы, коды статусов, заголовки, JSON.
    
4. **Кэширование**  
    Ответы можно кэшировать через `ETag`, `Last-Modified`, `Cache-Control`.  
    REST не запрещает, наоборот — рекомендует.
    
5. **Клиент–сервер**  
    Клиент отвечает за UI, сервер — за данные.  
    Между ними — только API. Ни серверных шаблонов, ни HTML.
    
6. **Слоистая система**  
    Можно ставить прокси, балансировщики, гейтвеи — API не должен от этого ломаться.
    

---

### Что такое **RESTful**

RESTful — это просто _прилагательное_:  
**API, которое следует принципам REST**.  
Если API хоть немного “по мотивам REST”, но при этом тащит state, мутные эндпоинты и POST для всего — это уже **не RESTful**, а что-то типа “REST-подобное чудовище”.

---

### Примеры хороших и плохих URL

|❌ Плохо|✅ Хорошо|
|---|---|
|`/getUserById?id=42`|`/users/42`|
|`/deleteUser`|`DELETE /users/{id}`|
|`/update_user`|`PUT /users/{id}`|
|`/create_order_item`|`POST /orders/{id}/items`|

---

### Форматы данных

Обычно JSON.  
Раньше любили XML, сейчас — максимум JSON или HAL/JSON-LD (где есть ссылки и метаинфо).

Пример:

```json
{
  "id": 10,
  "name": "Mikhail Savin",
  "links": {
    "self": "/users/10",
    "orders": "/users/10/orders"
  }
}
```

---

### Коды ответов HTTP

|Код|Значение|Пример|
|---|---|---|
|200 OK|всё хорошо|GET /users|
|201 Created|ресурс создан|POST /users|
|204 No Content|успешно, но без тела|DELETE /users/10|
|400 Bad Request|некорректные данные|валидация|
|401 Unauthorized|нет токена|авторизация|
|403 Forbidden|не хватает прав|доступ|
|404 Not Found|ресурса нет|GET /users/999|
|409 Conflict|конфликт данных|при дублях|
|500 Internal Server Error|баг на сервере|классика|

---

### REST ≠ CRUD, но CRUD — его частный случай

REST часто реализуют как CRUD (Create, Read, Update, Delete),  
но это не требование, а просто частое совпадение.

---

### Где REST теряет смысл

- Когда нужно **долгое соединение** (WebSocket, gRPC).
    
- Когда API **сильно связан** (например, GraphQL бывает удобнее).
    
- Когда важен **строгий контракт** (SOAP хоть и старьё, но чёткий).
    
- Когда у тебя микросервисы, которые не могут договориться о “правильном REST”.
    

---

### Итог

REST — это способ мыслить API как систему **ресурсов с четким поведением**.  
RESTful — это когда ты действительно следуешь этой философии,  
а не просто “пихаешь JSON в POST и надеешься, что это REST”.

