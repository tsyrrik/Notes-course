## Вопрос: Именованные маршруты
Версия: Laravel 12.x (актуальная), 11.x в security-fixes; PHP 8.2–8.4.

## Простой ответ
Имя маршрута даёт стабильный идентификатор URL, чтобы менять путь без правок по коду.

## Ответ

Именованные маршруты (Named Routes) — это способ присвоить маршруту уникальное имя, по которому можно генерировать URL или выполнять redirect. Это ключевая практика в Laravel, потому что при изменении URL (например, `/users` на `/members`) не нужно искать и заменять старый путь по всему коду — достаточно изменить определение маршрута, а все ссылки обновятся автоматически.

**Определение именованных маршрутов:**

```php
// Через метод name()
Route::get('/users', [UserController::class, 'index'])->name('users.index');
Route::get('/users/{user}', [UserController::class, 'show'])->name('users.show');
Route::post('/users', [UserController::class, 'store'])->name('users.store');

// Resource автоматически создаёт именованные маршруты
Route::resource('posts', PostController::class);
// Создаёт: posts.index, posts.create, posts.store, posts.show, posts.edit, posts.update, posts.destroy

// Группа с prefix имени
Route::name('admin.')->prefix('admin')->group(function () {
    Route::get('/dashboard', [AdminController::class, 'index'])->name('dashboard');
    // Полное имя: admin.dashboard
    Route::resource('users', AdminUserController::class);
    // Имена: admin.users.index, admin.users.show, ...
});
```

**Генерация URL по имени маршрута:**

```php
// Хелпер route()
$url = route('users.index');                           // /users
$url = route('users.show', ['user' => 1]);             // /users/1
$url = route('users.show', $user);                     // /users/1 (Eloquent модель)
$url = route('users.show', ['user' => $user, 'tab' => 'posts']); // /users/1?tab=posts

// Абсолютный vs относительный URL
$absolute = route('users.index');                      // https://example.com/users
$relative = route('users.index', [], false);           // /users

// Подписанные URL (Signed URL) — защищённые от подделки
$signedUrl = URL::signedRoute('unsubscribe', ['user' => $user]);
$temporaryUrl = URL::temporarySignedRoute('unsubscribe', now()->addHours(24), ['user' => $user]);
```

**Использование в разных контекстах:**

```php
// В контроллере — redirect
return redirect()->route('users.show', $user);
return to_route('users.show', $user);  // сокращённый синтаксис (Laravel 9+)

// Redirect с flash-данными
return redirect()->route('users.index')->with('success', 'Пользователь создан');

// В Blade-шаблонах
<a href="{{ route('users.show', $user) }}">{{ $user->name }}</a>

<form action="{{ route('users.update', $user) }}" method="POST">
    @csrf
    @method('PUT')
    <!-- поля формы -->
</form>

// Проверка текущего маршрута
@if(request()->routeIs('users.*'))
    <span class="active">Пользователи</span>
@endif

// В навигации — проверка активного раздела
<li class="{{ request()->routeIs('admin.dashboard') ? 'active' : '' }}">
    <a href="{{ route('admin.dashboard') }}">Dashboard</a>
</li>
```

**Проверка существования маршрута:**

```php
if (Route::has('users.show')) {
    // маршрут существует
}

// В middleware или контроллере
if ($request->routeIs('admin.*')) {
    // текущий маршрут начинается с admin.
}
```

**Практический совет:** именуйте все маршруты без исключения. Используйте точечную нотацию (`resource.action`) — это конвенция Laravel. Никогда не используйте `url('/users/1')` в коде — только `route('users.show', $user)`. Метод `routeIs()` с wildcard (`admin.*`) отлично подходит для подсветки активного пункта меню. `to_route()` — более лаконичная альтернатива `redirect()->route()` начиная с Laravel 9.

## Примеры

1. `Route::get('/users', ...)->name('users.index')`.
2. `route('users.show', $user)`.
3. `return redirect()->route('users.index')`.

## Доп. теория

1. Имена уменьшают связность при смене URL.
2. Именованные маршруты участвуют в route caching.
