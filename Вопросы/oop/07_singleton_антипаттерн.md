## Вопрос: Singleton как антипаттерн

## Простой ответ
- Глобальный единственный объект делает код зависимым от скрытого состояния и плохо тестируется.
- Если нужен «один экземпляр», лучше отдавать его через DI как shared-сервис.
```php
class Singleton {
    private static ?self $instance = null;
    private function __construct() {}
    public static function getInstance(): self {
        return self::$instance ??= new self();
    }
}
```

## Ответ
- Проблемы: глобальное состояние, скрытые зависимости, нарушение SRP/DIP, сложное тестирование, ограничения расширяемости, гонки в многопоточной среде.
- Допустим редко (ленивая инициализация, ограниченный контекст) и лучше через DI-контейнер с shared-инстансами.
