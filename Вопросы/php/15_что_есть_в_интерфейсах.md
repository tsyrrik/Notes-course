## Вопрос: Что есть в интерфейсах
Версия: PHP 8.4; где есть исторические детали — см. по тексту.

## Простой ответ
интерфейс задаёт контракт (только сигнатуры методов и константы), без реализации и состояния.

## Ответ

Интерфейс в PHP определяет **контракт** — набор методов, которые класс обязан реализовать. Со временем возможности интерфейсов расширялись:

### Что может содержать интерфейс

| Элемент | Версия PHP | Описание |
| --- | --- | --- |
| Public-методы (сигнатуры) | 5.0+ | Основа контракта |
| Константы | 5.0+ | `const VERSION = 1;` |
| Наследование интерфейсов | 5.0+ | `interface B extends A, C` |
| Статические методы | 5.0+ | `public static function create(): static;` |
| `final` константы | 8.1+ | Нельзя переопределить в реализации |
| Типизированные константы | 8.3+ | `const string NAME = 'test';` |

### Чего НЕ может содержать

- Свойства (нет состояния)
- Конструктор
- `private`/`protected` методы
- Реализацию методов (нет default-методов — в отличие от Java)

> **Важно**: в PHP **нет** default-методов в интерфейсах. Это не было принято. Если нужна общая реализация — используйте абстрактный класс или трейт.

### Наследование интерфейсов

Интерфейс может расширять несколько других интерфейсов:

```php
interface Readable {
    public function read(): string;
}

interface Writable {
    public function write(string $data): void;
}

interface Storage extends Readable, Writable {
    public function delete(string $key): void;
}
```

### Встроенные интерфейсы PHP

PHP содержит много стандартных интерфейсов:
- `Stringable` — автоматически добавляется при наличии `__toString()`
- `Countable` — для `count()`
- `Iterator` / `IteratorAggregate` — для `foreach`
- `ArrayAccess` — для обращения `$obj['key']`
- `JsonSerializable` — для `json_encode()`
- `Serializable` — устарел, используйте `__serialize()`/`__unserialize()`

## Примеры

```php
interface Repository {
    public function find(int $id): ?Entity;
    public function save(Entity $entity): void;
    public function delete(int $id): void;
}

// final константы (PHP 8.1+)
interface HttpMethod {
    final const string GET = 'GET';   // нельзя переопределить
    final const string POST = 'POST';
}

// Множественная реализация
class UserRepository implements Repository, \Countable, \JsonSerializable {
    public function find(int $id): ?Entity { /* ... */ }
    public function save(Entity $entity): void { /* ... */ }
    public function delete(int $id): void { /* ... */ }
    public function count(): int { /* ... */ }
    public function jsonSerialize(): mixed { /* ... */ }
}
```

## Доп. теория
- Все методы интерфейса должны быть `public`; в реализации нельзя сузить видимость.
- Интерфейс — тип: его можно использовать в type-hint и DI-контейнере.
