## Вопрос: include vs require
Версия: PHP 8.4; где есть исторические детали — см. по тексту.

## Простой ответ
`require` кидает фатал при отсутствии файла (обязательный), `include` — warning и идёт дальше (необязательный). Суффикс `_once` не даёт повторно подключить.

## Ответ

PHP имеет четыре конструкции для подключения файлов:

| Конструкция | При отсутствии файла | Повторное подключение |
| --- | --- | --- |
| `require` | Fatal Error (E_ERROR) | Подключит повторно |
| `include` | Warning (E_WARNING), продолжит | Подключит повторно |
| `require_once` | Fatal Error (E_ERROR) | Пропустит, если уже подключён |
| `include_once` | Warning, продолжит | Пропустит, если уже подключён |

### Когда что использовать

- **`require_once`** — подключение классов, конфигов, файлов с определениями функций. Самый распространённый вариант.
- **`require`** — когда файл нужен и вы уверены, что повторного подключения не будет (bootstrap, entry point).
- **`include`** — опциональные файлы: шаблоны, плагины, которые могут отсутствовать.
- **`include_once`** — опциональные файлы, которые не должны подключаться дважды.

### Важные нюансы

1. Это **языковые конструкции**, а не функции — скобки необязательны: `require 'file.php';`.
2. `_once` варианты **медленнее** — PHP ведёт реестр подключённых файлов и сравнивает реальные пути (с разрешением симлинков).
3. Подключённый файл **наследует scope** — переменные из вызывающего кода доступны, и наоборот. Исключение: функции и классы из подключённого файла попадают в глобальную область.
4. Возвращаемое значение: файл может делать `return $value;`, и тогда `$config = require 'config.php';` — распространённый паттерн (Laravel config).
5. В современных проектах `require`/`include` почти не используются напрямую — их заменяет **автозагрузка** (Composer PSR-4).

## Примеры

```php
// Bootstrap — обязательный файл
require __DIR__ . '/vendor/autoload.php';

// Laravel-style config — return из файла
// config/app.php:
return ['name' => 'MyApp', 'debug' => true];
// Использование:
$config = require __DIR__ . '/config/app.php';
echo $config['name']; // MyApp

// Опциональный шаблон
include __DIR__ . '/templates/sidebar.php'; // не фатал если нет

// include наследует scope
$title = 'Hello';
include 'header.php'; // внутри header.php доступна переменная $title
```

## Доп. теория
- Пути в `_once` сравниваются после нормализации (realpath), поэтому один и тот же файл по разным путям будет подключён один раз.
- `include` возвращает `1`, если файл не сделал `return`, иначе возвращает переданное значение.
