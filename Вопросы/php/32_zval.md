# Zval в PHP
- Внутренняя структура PHP для хранения значения: хранит тип, значение, refcount, флаги.
- Copy-on-write: копии разделяют zval до первой модификации.
- Ссылки (`&`) делят один zval с `is_ref=1`.
```php
$a = 42; $b = $a; // refcount=2
$b = 100;         // новый zval для $b

$c = 42; $d =& $c; // общая zval, is_ref=1
$d = 100;          // изменятся оба
```
- Диагностика: `debug_zval_dump($var)`, `memory_get_usage()`, GC использует refcount для очистки.
- Плюсы: COW экономит память/время на копировании; минусы — ссылки ломают COW и усложняют GC (циклы).
