## Вопрос: Задачи на синтаксис
Версия: PHP 8.4; где есть исторические детали — см. по тексту.

## Простой ответ
- Набор напоминаний о тонкостях синтаксиса: ссылки/COW, статические переменные, подводные камни сравнений и приведения типов.

## Ответ

Типичные задачи на собеседовании, проверяющие понимание подводных камней PHP.

## Примеры
### 1. Ссылки и COW

```php
$a = 1;
$b = &$a;
$b = 2;
echo $a; // 2 — $a и $b указывают на одно значение

unset($b);
echo $a; // 2 — unset разрывает ссылку, не удаляет значение
```

### 2. Статические переменные

```php
function counter(): int {
    static $count = 0; // инициализируется один раз
    return ++$count;
}
echo counter(); // 1
echo counter(); // 2
echo counter(); // 3
```

### 3. Сравнение == vs === (PHP 8.0+)

```php
// PHP 8.0 изменил поведение сравнения строк с числами
var_dump(0 == "foo");     // false (PHP 8.0+), было true в PHP 7!
var_dump(0 == "");        // false (PHP 8.0+), было true в PHP 7!
var_dump("" == null);     // true
var_dump("0" == false);   // true
var_dump("0" == null);    // false
var_dump("" == false);    // true

// Классическая ловушка с хешами
var_dump('0e123' == '0e456'); // true! Оба "научная нотация" = 0.0
var_dump('0e123' === '0e456'); // false — строки разные

// Всегда используйте === для строгого сравнения
```

### 4. Приведение к bool

```php
// false:
(bool) 0          // false
(bool) 0.0        // false
(bool) ""         // false
(bool) "0"        // false — ловушка!
(bool) []         // false
(bool) null       // false

// true:
(bool) "false"    // true! Непустая строка
(bool) "0.0"      // true! Только "0" → false
(bool) [0]        // true! Непустой массив
(bool) -1         // true! Любое ненулевое число
```

### 5. foreach и ссылки

```php
$arr = [1, 2, 3];
foreach ($arr as &$val) {
    $val *= 2;
}
// $arr = [2, 4, 6]
// НО: $val всё ещё ссылка на $arr[2]!

foreach ($arr as $val) {
    // каждая итерация записывает в $arr[2]!
}
var_dump($arr); // [2, 4, 4] — не [2, 4, 6]!
// Решение: unset($val) после первого foreach
```

### 6. Порядок вычислений

```php
$a = $b = 1;   // правоассоциативно: $b = 1, затем $a = $b
echo $a + $b;   // 2

$x = 1;
echo $x + $x++; // Undefined behavior до PHP 8.0!
// С PHP 8.0: deprecated, с 8.3: ошибка
```

### 7. Приведение типов в switch

```php
$val = "0";
switch ($val) {
    case 0:     echo "число 0";   break; // PHP 7: сюда попадёт!
    case "0":   echo "строка 0";  break; // PHP 8: сюда
    case false: echo "false";     break;
}
// switch использует == (нестрогое). Используйте match для строгого:
echo match($val) {
    0     => "число 0",
    "0"   => "строка 0",  // сюда
    false => "false",
};
```

### 8. Область видимости

```php
$x = 10;
function foo() {
    echo $x; // Warning: undefined variable
    // Функции НЕ имеют доступа к внешним переменным
    // Нужно: global $x; или передать аргументом
}
foo();
```

## Доп. теория
- Вопросы на синтаксис обычно проверяют понимание неявных приведений и нюансов ссылок/областей видимости.
