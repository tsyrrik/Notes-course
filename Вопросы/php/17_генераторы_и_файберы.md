# Генераторы и файберы

Простыми словами:
- Генераторы (`yield`) — ленивые итераторы: возвращают значения по одному, не держат всю коллекцию в памяти. Не сохраняют стек вызовов, только позицию итерации.
- Файберы (PHP 8.1) — сопрограммы: могут приостанавливать/возобновлять выполнение с сохранением стека (в т.ч. внутри нескольких вызовов), используются для асинхронщины/кооперативной многозадачности.
Итераторы — интерфейс `current/next/key/valid/rewind` для обхода; генераторы упрощают их создание.

Пример генератора
```php
function numbers(): Generator {
    yield 1;
    yield from [2, 3];
}
foreach (numbers() as $n) { echo $n; } // 123
```

Пример файбера (очень упрощённо)
```php
$fiber = new Fiber(function (): void {
    $val = Fiber::suspend('step1'); // приостановка, отдаём 'step1'
    echo "Resumed with $val";       // выполнится после resume
});

$first = $fiber->start();      // 'step1'
$fiber->resume('step2');       // продолжает, напечатает Resumed with step2
```

Разница:
- Генератор: только поток значений вперёд, стек не сохраняет, пауза в одной точке `yield`.
- Файбер: может приостанавливать и возобновлять произвольный стек (вложенные вызовы) и возвращаться к нему многократно — подходит для кооперативного “асинхронного” кода.
